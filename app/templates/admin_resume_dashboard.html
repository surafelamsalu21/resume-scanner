<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>Resume Management - Admin Dashboard</title>
		<!-- Professional CSS -->
		<link
			rel="stylesheet"
			href="{{ url_for('static', filename='css/professional.css') }}"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
		/>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<style>
			/* Modern Professional Resume Dashboard */
			body {
				font-family: "Inter", sans-serif;
				margin: 0;
				padding: 0;
				background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
				color: #1a202c;
				line-height: 1.6;
				min-height: 100vh;
			}

			/* Header Styles - Same as main dashboard */
			.admin-header {
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(10px);
				border-bottom: 1px solid rgba(0, 0, 0, 0.05);
				padding: 0;
				position: sticky;
				top: 0;
				z-index: 100;
				box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
			}

			.admin-nav {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 1rem 2rem;
				max-width: none;
			}

			.admin-logo {
				display: flex;
				align-items: center;
				gap: 0.75rem;
				font-size: 1.5rem;
				font-weight: 700;
				color: var(--primary-color);
				text-decoration: none;
			}

			.admin-logo i {
				background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
			}

			.admin-nav-links {
				display: flex;
				gap: 2rem;
				align-items: center;
			}

			.admin-nav-link {
				color: #64748b;
				text-decoration: none;
				font-weight: 500;
				font-size: 0.95rem;
				padding: 0.5rem 1rem;
				border-radius: var(--radius-lg);
				transition: all var(--transition-normal);
				position: relative;
			}

			.admin-nav-link:hover {
				color: var(--primary-color);
				background: rgba(13, 110, 253, 0.1);
			}

			.admin-nav-link.active {
				color: var(--primary-color);
				background: rgba(13, 110, 253, 0.1);
			}

			.logout-btn {
				background: linear-gradient(135deg, #ef4444, #dc2626);
				color: white;
				border: none;
				padding: 0.5rem 1rem;
				border-radius: var(--radius-lg);
				font-weight: 500;
				cursor: pointer;
				transition: all var(--transition-normal);
				display: flex;
				align-items: center;
				gap: 0.5rem;
			}

			.logout-btn:hover {
				transform: translateY(-1px);
				box-shadow: var(--shadow-lg);
			}

			/* Dashboard Layout */
			.dashboard-container {
				display: flex;
				min-height: calc(100vh - 80px);
			}

			/* Sidebar - Same as main dashboard */
			.admin-sidebar {
				width: 280px;
				background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
				color: white;
				padding: 2rem 0;
				box-shadow: var(--shadow-xl);
				position: relative;
			}

			.admin-sidebar::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><defs><pattern id="grid" width="60" height="60" patternUnits="userSpaceOnUse"><path d="M 60 0 L 0 0 0 60" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
				opacity: 0.3;
			}

			.sidebar-content {
				position: relative;
				z-index: 2;
			}

			.sidebar-header {
				padding: 0 2rem 2rem;
				border-bottom: 1px solid rgba(255, 255, 255, 0.1);
				margin-bottom: 2rem;
			}

			.sidebar-title {
				font-size: 1.25rem;
				font-weight: 600;
				color: #f1f5f9;
				margin: 0;
				display: flex;
				align-items: center;
				gap: 0.75rem;
			}

			.sidebar-menu {
				list-style: none;
				padding: 0;
				margin: 0;
			}

			.sidebar-menu-item {
				margin-bottom: 0.5rem;
			}

			.sidebar-menu-link {
				display: flex;
				align-items: center;
				gap: 1rem;
				padding: 1rem 2rem;
				color: rgba(241, 245, 249, 0.8);
				text-decoration: none;
				transition: all var(--transition-normal);
				border-left: 3px solid transparent;
				font-weight: 500;
			}

			.sidebar-menu-link:hover,
			.sidebar-menu-link.active {
				background: rgba(255, 255, 255, 0.1);
				color: #f1f5f9;
				border-left-color: var(--accent-color);
				backdrop-filter: blur(10px);
			}

			.sidebar-menu-icon {
				width: 20px;
				text-align: center;
				font-size: 1.1rem;
			}

			/* Main Content */
			.main-content {
				flex: 1;
				padding: 2rem;
				background: transparent;
			}

			.dashboard-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 2rem;
				background: white;
				padding: 1.5rem 2rem;
				border-radius: var(--radius-2xl);
				box-shadow: var(--shadow-lg);
				border: 1px solid rgba(255, 255, 255, 0.2);
			}

			.dashboard-title {
				font-size: 2rem;
				font-weight: 700;
				color: #1a202c;
				margin: 0;
				background: linear-gradient(135deg, #1a202c, #4a5568);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
			}

			.user-info {
				display: flex;
				align-items: center;
				gap: 1rem;
				background: linear-gradient(135deg, #f8fafc, #e2e8f0);
				padding: 0.75rem 1.5rem;
				border-radius: var(--radius-xl);
				border: 1px solid rgba(0, 0, 0, 0.05);
			}

			.user-avatar {
				width: 40px;
				height: 40px;
				background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
				border-radius: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				color: white;
				font-weight: 600;
			}

			.user-details h4 {
				margin: 0;
				font-size: 0.9rem;
				font-weight: 600;
				color: #1a202c;
			}

			.user-details p {
				margin: 0;
				font-size: 0.8rem;
				color: #64748b;
			}

			/* Stats Grid */
			.stats-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
				gap: 1.5rem;
				margin-bottom: 2rem;
			}

			.stat-card {
				background: white;
				border-radius: var(--radius-2xl);
				padding: 1.5rem;
				box-shadow: var(--shadow-lg);
				border: 1px solid rgba(255, 255, 255, 0.2);
				position: relative;
				overflow: hidden;
				transition: all var(--transition-normal);
				text-align: center;
			}

			.stat-card:hover {
				transform: translateY(-2px);
				box-shadow: var(--shadow-xl);
			}

			.stat-card::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				height: 4px;
				background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
			}

			.stat-value {
				font-size: 2.5rem;
				font-weight: 700;
				color: var(--primary-color);
				margin-bottom: 0.5rem;
			}

			.stat-label {
				color: #64748b;
				font-weight: 500;
				font-size: 0.875rem;
			}

			/* Filter Section */
			.filter-section {
				background: white;
				border-radius: var(--radius-2xl);
				padding: 2rem;
				box-shadow: var(--shadow-lg);
				border: 1px solid rgba(255, 255, 255, 0.2);
				margin-bottom: 2rem;
			}

			.filter-title {
				font-size: 1.5rem;
				font-weight: 600;
				color: #1a202c;
				margin: 0 0 1.5rem 0;
			}

			.filter-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
				gap: 1.5rem;
				align-items: end;
			}

			.form-group {
				display: flex;
				flex-direction: column;
			}

			.form-label {
				font-weight: 600;
				color: #374151;
				margin-bottom: 0.5rem;
				font-size: 0.875rem;
			}

			.form-control {
				padding: 0.75rem;
				border: 2px solid #e5e7eb;
				border-radius: var(--radius-lg);
				background: white;
				color: #374151;
				font-size: 0.875rem;
				transition: all var(--transition-normal);
			}

			.form-control:focus {
				outline: none;
				border-color: var(--primary-color);
				box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.1);
			}

			.filter-actions {
				display: flex;
				gap: 1rem;
			}

			.btn {
				padding: 0.75rem 1.5rem;
				border-radius: var(--radius-lg);
				font-weight: 600;
				font-size: 0.875rem;
				text-decoration: none;
				border: none;
				cursor: pointer;
				transition: all var(--transition-normal);
				display: inline-flex;
				align-items: center;
				gap: 0.5rem;
			}

			.btn-primary {
				background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
				color: white;
			}

			.btn-primary:hover {
				transform: translateY(-1px);
				box-shadow: var(--shadow-lg);
			}

			.btn-secondary {
				background: linear-gradient(135deg, #6b7280, #4b5563);
				color: white;
			}

			.btn-secondary:hover {
				transform: translateY(-1px);
				box-shadow: var(--shadow-lg);
			}

			/* Table Section */
			.table-section {
				background: white;
				border-radius: var(--radius-2xl);
				padding: 2rem;
				box-shadow: var(--shadow-lg);
				border: 1px solid rgba(255, 255, 255, 0.2);
			}

			.table-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 1.5rem;
			}

			.table-title {
				font-size: 1.5rem;
				font-weight: 600;
				color: #1a202c;
				margin: 0;
			}

			.modern-table {
				width: 100%;
				border-collapse: collapse;
				margin-top: 1rem;
			}

			.modern-table th {
				background: linear-gradient(135deg, #f8fafc, #e2e8f0);
				color: #374151;
				font-weight: 600;
				padding: 1rem 1.5rem;
				text-align: left;
				border-bottom: 2px solid #e2e8f0;
				font-size: 0.875rem;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}

			.modern-table td {
				padding: 1rem 1.5rem;
				border-bottom: 1px solid #f1f5f9;
				color: #374151;
			}

			.modern-table tbody tr {
				transition: all var(--transition-normal);
			}

			.modern-table tbody tr:hover {
				background: linear-gradient(135deg, #f8fafc, #f1f5f9);
				transform: translateX(4px);
			}

			/* Status Badges */
			.status-badge {
				display: inline-flex;
				align-items: center;
				gap: 0.5rem;
				padding: 0.5rem 1rem;
				border-radius: var(--radius-lg);
				font-size: 0.875rem;
				font-weight: 500;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}

			.badge-pending {
				background: linear-gradient(135deg, #fef3c7, #fde68a);
				color: #92400e;
			}

			.badge-processing {
				background: linear-gradient(135deg, #dbeafe, #bfdbfe);
				color: #1e40af;
			}

			.badge-processed {
				background: linear-gradient(135deg, #e0f2fe, #b3e5fc);
				color: #0277bd;
			}

			.badge-approved {
				background: linear-gradient(135deg, #dcfce7, #bbf7d0);
				color: #166534;
			}

			.badge-rejected {
				background: linear-gradient(135deg, #fecaca, #fca5a5);
				color: #dc2626;
			}

			.badge-shortlisted {
				background: linear-gradient(135deg, #e0f2fe, #b3e5fc);
				color: #0277bd;
			}

			/* Action Buttons */
			.action-buttons {
				display: flex;
				gap: 0.5rem;
			}

			.btn-sm {
				padding: 0.5rem;
				font-size: 0.875rem;
				min-width: auto;
			}

			.btn-info {
				background: linear-gradient(135deg, #06b6d4, #0891b2);
				color: white;
			}

			.btn-success {
				background: linear-gradient(135deg, #10b981, #059669);
				color: white;
			}

			.btn-danger {
				background: linear-gradient(135deg, #ef4444, #dc2626);
				color: white;
			}

			.btn:disabled {
				opacity: 0.5;
				cursor: not-allowed;
			}

			/* Modal Styles */
			.modal-overlay {
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background-color: rgba(0, 0, 0, 0.5);
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 1000;
			}

			.modal-content {
				background: white;
				border-radius: var(--radius-xl);
				padding: 2rem;
				max-width: 500px;
				width: 90%;
				box-shadow: var(--shadow-2xl);
			}

			.modal-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 1.5rem;
				padding-bottom: 1rem;
				border-bottom: 1px solid #e2e8f0;
			}

			.modal-title {
				font-size: 1.25rem;
				font-weight: 600;
				color: #1a202c;
				margin: 0;
			}

			.close-modal {
				background: none;
				border: none;
				font-size: 1.5rem;
				cursor: pointer;
				color: #6b7280;
				padding: 0.5rem;
				border-radius: var(--radius-lg);
				transition: all var(--transition-normal);
			}

			.close-modal:hover {
				background: #f3f4f6;
				color: #374151;
			}

			.modal-textarea {
				width: 100%;
				min-height: 120px;
				padding: 1rem;
				border: 2px solid #e5e7eb;
				border-radius: var(--radius-lg);
				font-family: inherit;
				font-size: 0.875rem;
				resize: vertical;
				margin-bottom: 1.5rem;
			}

			.modal-textarea:focus {
				outline: none;
				border-color: var(--primary-color);
				box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.1);
			}

			/* Responsive Design */
			@media (max-width: 1024px) {
				.dashboard-container {
					flex-direction: column;
				}

				.admin-sidebar {
					width: 100%;
					padding: 1rem 0;
				}

				.sidebar-menu {
					display: flex;
					overflow-x: auto;
					padding: 0 1rem;
				}

				.sidebar-menu-item {
					margin-bottom: 0;
					margin-right: 0.5rem;
					white-space: nowrap;
				}

				.main-content {
					padding: 1rem;
				}

				.stats-grid {
					grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
				}

				.filter-grid {
					grid-template-columns: 1fr;
				}
			}

			@media (max-width: 768px) {
				.admin-nav {
					padding: 1rem;
					flex-direction: column;
					gap: 1rem;
				}

				.admin-nav-links {
					flex-wrap: wrap;
					justify-content: center;
				}

				.dashboard-header {
					flex-direction: column;
					gap: 1rem;
				}

				.stats-grid {
					grid-template-columns: repeat(2, 1fr);
				}
			}
		</style>
	</head>
	<body>
		<!-- Modern Admin Header -->
		<header class="admin-header">
			<nav class="admin-nav">
				<a href="/" class="admin-logo">
					<i class="fas fa-brain"></i>
					Resume AI
				</a>
				<div class="admin-nav-links">
					<a href="{{ url_for('admin.dashboard') }}" class="admin-nav-link">
						<i class="fas fa-tachometer-alt"></i>
						Dashboard
					</a>
					<a href="{{ url_for('admin.resume_dashboard') }}" class="admin-nav-link active">
						<i class="fas fa-file-alt"></i>
						Resumes
					</a>
					<a href="{{ url_for('admin.job_categories_page') }}" class="admin-nav-link">
						<i class="fas fa-briefcase"></i>
						Categories
					</a>
					<a href="{{ url_for('admin.prompts_management_page') }}" class="admin-nav-link">
						<i class="fas fa-comment-dots"></i>
						AI Prompts
					</a>
					<button id="logout-link" class="logout-btn">
						<i class="fas fa-sign-out-alt"></i>
						Logout
					</button>
				</div>
			</nav>
		</header>

		<div class="dashboard-container">
			<!-- Modern Sidebar -->
			<aside class="admin-sidebar">
				<div class="sidebar-content">
					<div class="sidebar-header">
						<h3 class="sidebar-title">
							<i class="fas fa-shield-alt"></i>
							Admin Control
						</h3>
					</div>
					<ul class="sidebar-menu">
						<li class="sidebar-menu-item">
							<a href="{{ url_for('admin.dashboard') }}" class="sidebar-menu-link">
								<i class="fas fa-chart-pie sidebar-menu-icon"></i>
								Dashboard Overview
							</a>
						</li>
						<li class="sidebar-menu-item">
							<a href="{{ url_for('admin.resume_dashboard') }}" class="sidebar-menu-link active">
								<i class="fas fa-file-alt sidebar-menu-icon"></i>
								Resume Management
							</a>
						</li>
						<li class="sidebar-menu-item">
							<a href="{{ url_for('admin.job_categories_page') }}" class="sidebar-menu-link">
								<i class="fas fa-briefcase sidebar-menu-icon"></i>
								Job Categories
							</a>
						</li>
						<li class="sidebar-menu-item">
							<a href="{{ url_for('admin.prompts_management_page') }}" class="sidebar-menu-link">
								<i class="fas fa-comment-dots sidebar-menu-icon"></i>
								AI Prompts
							</a>
						</li>
						<li class="sidebar-menu-item">
							<a href="#" class="sidebar-menu-link">
								<i class="fas fa-chart-line sidebar-menu-icon"></i>
								Analytics
							</a>
						</li>
						<li class="sidebar-menu-item">
							<a href="#" class="sidebar-menu-link">
								<i class="fas fa-cog sidebar-menu-icon"></i>
								Settings
							</a>
						</li>
					</ul>
				</div>
			</aside>

			<!-- Main Content Area -->
			<main class="main-content">
				<!-- Dashboard Header -->
				<div class="dashboard-header">
					<h1 class="dashboard-title">Resume Management</h1>
					<div class="user-info">
						<div class="user-avatar">A</div>
						<div class="user-details">
							<h4>{{ admin.username if admin else 'Administrator' }}</h4>
							<p>Resume Manager</p>
						</div>
					</div>
				</div>

				<!-- Stats Grid -->
				<div class="stats-grid">
					<div class="stat-card">
						<div class="stat-value">{{ stats.total or 0 }}</div>
						<div class="stat-label">Total Resumes</div>
					</div>
					<div class="stat-card">
						<div class="stat-value">{{ stats.pending or 0 }}</div>
						<div class="stat-label">Pending</div>
					</div>
					<div class="stat-card">
						<div class="stat-value">{{ stats.processed or 0 }}</div>
						<div class="stat-label">Processed</div>
					</div>
					<div class="stat-card">
						<div class="stat-value">{{ stats.approved or 0 }}</div>
						<div class="stat-label">Approved</div>
					</div>
					<div class="stat-card">
						<div class="stat-value">{{ stats.rejected or 0 }}</div>
						<div class="stat-label">Rejected</div>
					</div>
					<div class="stat-card">
						<div class="stat-value">{{ stats.shortlisted or 0 }}</div>
						<div class="stat-label">Shortlisted</div>
					</div>
				</div>

				<!-- Filter Section -->
				<div class="filter-section">
					<h3 class="filter-title">Filter Resumes</h3>
					<form id="filter-form" method="GET" action="{{ url_for('admin.resume_dashboard') }}">
						<div class="filter-grid">
							<div class="form-group">
								<label for="job_role" class="form-label">Job Role</label>
								<select name="job_role" id="job_role" class="form-control">
									<option value="">All Job Roles</option>
									{% for role in job_roles %}
									<option value="{{ role }}" {% if request.args.get('job_role') == role %}selected{% endif %}>
										{{ role }}
									</option>
									{% endfor %}
								</select>
							</div>
							<div class="form-group">
								<label for="status" class="form-label">Status</label>
								<select name="status" id="status" class="form-control">
									<option value="">All Statuses</option>
									{% for status in statuses %}
									<option value="{{ status.value }}" {% if request.args.get('status') == status.value %}selected{% endif %}>
										{{ status.label }}
									</option>
									{% endfor %}
								</select>
							</div>
							<div class="form-group">
								<label for="min_score" class="form-label">Min Score (%)</label>
								<input type="number" name="min_score" id="min_score" class="form-control" 
									   min="0" max="100" step="0.1" placeholder="Min Score"
									   value="{{ request.args.get('min_score', '') }}" />
							</div>
							<div class="form-group">
								<label for="max_score" class="form-label">Max Score (%)</label>
								<input type="number" name="max_score" id="max_score" class="form-control" 
									   min="0" max="100" step="0.1" placeholder="Max Score"
									   value="{{ request.args.get('max_score', '') }}" />
							</div>
							<div class="form-group">
								<label for="sort_by" class="form-label">Sort By</label>
								<select name="sort_by" id="sort_by" class="form-control">
									<option value="upload_date" {% if request.args.get('sort_by') == 'upload_date' or not request.args.get('sort_by') %}selected{% endif %}>Upload Date</option>
									<option value="ranking_score" {% if request.args.get('sort_by') == 'ranking_score' %}selected{% endif %}>Ranking Score</option>
									<option value="job_role" {% if request.args.get('sort_by') == 'job_role' %}selected{% endif %}>Job Role</option>
								</select>
							</div>
							<div class="form-group">
								<label for="sort_order" class="form-label">Sort Order</label>
								<select name="sort_order" id="sort_order" class="form-control">
									<option value="desc" {% if request.args.get('sort_order') == 'desc' or not request.args.get('sort_order') %}selected{% endif %}>Descending</option>
									<option value="asc" {% if request.args.get('sort_order') == 'asc' %}selected{% endif %}>Ascending</option>
								</select>
							</div>
							<div class="filter-actions">
								<button type="submit" class="btn btn-primary">
									<i class="fas fa-filter"></i>
									Apply Filters
								</button>
								<a href="{{ url_for('admin.resume_dashboard') }}" class="btn btn-secondary">
									<i class="fas fa-refresh"></i>
									Reset
								</a>
							</div>
						</div>
					</form>
				</div>

				<!-- Table Section -->
				<div class="table-section">
					<div class="table-header">
						<h3 class="table-title">Resume List</h3>
					</div>
					<table class="modern-table">
						<thead>
							<tr>
								<th>ID</th>
								<th>Candidate</th>
								<th>Job Role</th>
								<th>Category</th>
								<th>Date</th>
								<th>Status</th>
								<th>Score</th>
								<th>Actions</th>
							</tr>
						</thead>
						<tbody>
							{% if resumes %}
								{% for resume in resumes %}
								<tr>
									<td><strong>{{ resume.id }}</strong></td>
									<td>
										<div style="display: flex; align-items: center; gap: 0.75rem;">
											<div style="width: 32px; height: 32px; background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.875rem;">
												{{ resume.candidate_name[0] if resume.candidate_name else 'U' }}
											</div>
											<div>
												<div style="font-weight: 500;">{{ resume.candidate_name or 'Unknown' }}</div>
											</div>
										</div>
									</td>
									<td><strong>{{ resume.job_role }}</strong></td>
									<td>
										{% if resume.job_posting and resume.job_posting.category %}
											{{ resume.job_posting.category.name }}
										{% else %}
											<span style="color: #6b7280;">General</span>
										{% endif %}
									</td>
									<td>{{ resume.upload_date.strftime('%Y-%m-%d') }}</td>
									<td>
										<span class="status-badge {% if resume.status == 'pending' %}badge-pending
											{% elif resume.status == 'processing' %}badge-processing
											{% elif resume.status == 'processed' %}badge-processed
											{% elif resume.status == 'approved' %}badge-approved
											{% elif resume.status == 'rejected' %}badge-rejected
											{% elif resume.status == 'shortlisted' %}badge-shortlisted
											{% else %}badge-pending{% endif %}">
											<i class="fas fa-{% if resume.status == 'approved' %}check-circle
												{% elif resume.status == 'rejected' %}times-circle
												{% elif resume.status == 'processed' %}check
												{% elif resume.status == 'processing' %}spinner fa-spin
												{% else %}clock{% endif %}"></i>
											{{ resume.status }}
										</span>
									</td>
									<td>
										{% if resume.processed_resume and resume.processed_resume.ranking_score %}
											<strong style="color: var(--primary-color);">{{ "%.1f"|format(resume.processed_resume.ranking_score) }}%</strong>
										{% else %}
											<span style="color: #6b7280;">N/A</span>
										{% endif %}
									</td>
									<td class="action-buttons">
										<a href="{{ url_for('admin.view_resume', resume_id=resume.id) }}" class="btn btn-sm btn-info" title="View Details">
											<i class="fas fa-eye"></i>
										</a>
										<button class="btn btn-sm btn-success approve-cv" data-id="{{ resume.id }}" 
											{% if resume.status == 'approved' %}disabled{% endif %} title="Approve">
											<i class="fas fa-check"></i>
										</button>
										<button class="btn btn-sm btn-danger reject-cv" data-id="{{ resume.id }}"
											{% if resume.status == 'rejected' %}disabled{% endif %} title="Reject">
											<i class="fas fa-times"></i>
										</button>
										<button class="btn btn-sm btn-secondary add-feedback" data-id="{{ resume.id }}" title="Add Feedback">
											<i class="fas fa-comment"></i>
										</button>
									</td>
								</tr>
								{% endfor %}
							{% else %}
								<tr>
									<td colspan="8" style="text-align: center; padding: 3rem; color: #6b7280;">
										<i class="fas fa-file-alt" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
										<div>No resumes found</div>
									</td>
								</tr>
							{% endif %}
						</tbody>
					</table>
				</div>
			</main>
		</div>

		<!-- Professional Feedback Modal -->
		<div class="modal-overlay" id="feedback-modal" style="display: none;">
			<div class="modal-content">
				<div class="modal-header">
					<h3 class="modal-title">Add Feedback</h3>
					<button class="close-modal" type="button">&times;</button>
				</div>
				<div class="modal-body">
					<textarea id="feedback-text" class="modal-textarea" placeholder="Enter your feedback here..."></textarea>
					<input type="hidden" id="resume-id">
					<button id="save-feedback" class="btn btn-primary" style="width: 100%;">
						<i class="fas fa-save"></i>
						Save Feedback
					</button>
				</div>
			</div>
		</div>

		<!-- Modern Footer -->
		<footer class="admin-footer">
			<p>&copy; 2025 Resume AI. Transforming hiring with intelligent technology.</p>
		</footer>

		<script>
			document.addEventListener("DOMContentLoaded", function () {
				// Enhanced logout functionality
				document.getElementById("logout-link").addEventListener("click", function () {
					handleLogout();
				});

				// Sidebar navigation active state
				const sidebarLinks = document.querySelectorAll('.sidebar-menu-link');
				const currentPath = window.location.pathname;
				
				sidebarLinks.forEach(link => {
					if (link.getAttribute('href') === currentPath) {
						sidebarLinks.forEach(l => l.classList.remove('active'));
						link.classList.add('active');
					}
				});

				// Handle action buttons with confirmation
				document.querySelectorAll('.approve-cv').forEach(button => {
					button.addEventListener('click', function() {
						const resumeId = this.getAttribute('data-id');
						if (confirm('Are you sure you want to approve this resume?')) {
							updateResumeStatus(resumeId, 'approved');
						}
					});
				});

				document.querySelectorAll('.reject-cv').forEach(button => {
					button.addEventListener('click', function() {
						const resumeId = this.getAttribute('data-id');
						if (confirm('Are you sure you want to reject this resume?')) {
							updateResumeStatus(resumeId, 'rejected');
						}
					});
				});

				// Handle feedback modal
				document.querySelectorAll('.add-feedback').forEach(button => {
					button.addEventListener('click', function() {
						const resumeId = this.getAttribute('data-id');
						document.getElementById('resume-id').value = resumeId;
						document.getElementById('feedback-modal').style.display = 'flex';
					});
				});

				// Close modal handlers
				document.querySelector('.close-modal').addEventListener('click', function() {
					document.getElementById('feedback-modal').style.display = 'none';
				});

				// Save feedback with validation
				document.getElementById('save-feedback').addEventListener('click', function() {
					const resumeId = document.getElementById('resume-id').value;
					const feedback = document.getElementById('feedback-text').value;
					
					if (!feedback.trim()) {
						showNotification('Please enter feedback before saving', 'error');
						return;
					}
					
					saveFeedback(resumeId, feedback);
				});

				// Close modal when clicking outside
				window.addEventListener('click', function(event) {
					const modal = document.getElementById('feedback-modal');
					if (event.target === modal) {
						modal.style.display = 'none';
					}
				});

				// Add loading animations to stats cards
				animateStatsCards();
			});

			// Enhanced logout function
			function handleLogout() {
				if (confirm('Are you sure you want to logout?')) {
					// Clear authentication data
					document.cookie = "access_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
					document.cookie = "refresh_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
					localStorage.removeItem("access_token");
					localStorage.removeItem("refresh_token");
					sessionStorage.clear();

					// Show logout message
					showNotification('Logged out successfully', 'success');

					// Redirect after short delay
					setTimeout(() => {
						window.location.href = "/admin/login";
					}, 1000);
				}
			}

			// Update resume status with enhanced feedback
			function updateResumeStatus(resumeId, status) {
				// Show loading state
				const button = document.querySelector(`[data-id="${resumeId}"].${status === 'approved' ? 'approve-cv' : 'reject-cv'}`);
				const originalHTML = button.innerHTML;
				button.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
				button.disabled = true;

				fetch(`/admin/api/resumes/${resumeId}/status`, {
					method: 'PUT',
					headers: {
						'Content-Type': 'application/json',
						'Authorization': `Bearer ${getToken()}`
					},
					body: JSON.stringify({ status })
				})
				.then(response => response.json())
				.then(data => {
					if (data.error) {
						showNotification(data.error, 'error');
						button.innerHTML = originalHTML;
						button.disabled = false;
					} else {
						showNotification(`Resume ${status} successfully!`, 'success');
						setTimeout(() => {
							window.location.reload();
						}, 1500);
					}
				})
				.catch(error => {
					console.error('Error:', error);
					showNotification('An error occurred while updating status', 'error');
					button.innerHTML = originalHTML;
					button.disabled = false;
				});
			}

			// Save feedback with enhanced UX
			function saveFeedback(resumeId, feedback) {
				const saveButton = document.getElementById('save-feedback');
				const originalHTML = saveButton.innerHTML;
				saveButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
				saveButton.disabled = true;

				fetch(`/admin/api/resumes/${resumeId}/feedback`, {
					method: 'PUT',
					headers: {
						'Content-Type': 'application/json',
						'Authorization': `Bearer ${getToken()}`
					},
					body: JSON.stringify({ feedback })
				})
				.then(response => response.json())
				.then(data => {
					if (data.error) {
						showNotification(data.error, 'error');
					} else {
						showNotification('Feedback saved successfully!', 'success');
						document.getElementById('feedback-modal').style.display = 'none';
						document.getElementById('feedback-text').value = '';
					}
				})
				.catch(error => {
					console.error('Error:', error);
					showNotification('An error occurred while saving feedback', 'error');
				})
				.finally(() => {
					saveButton.innerHTML = originalHTML;
					saveButton.disabled = false;
				});
			}

			// Enhanced notification system
			function showNotification(message, type = 'info') {
				const notification = document.createElement('div');
				notification.className = `notification ${type}`;
				notification.style.cssText = `
					position: fixed;
					top: 20px;
					right: 20px;
					background: ${type === 'success' ? 'linear-gradient(135deg, #10b981, #059669)' : 
								 type === 'error' ? 'linear-gradient(135deg, #ef4444, #dc2626)' : 
								 'linear-gradient(135deg, #3b82f6, #2563eb)'};
					color: white;
					padding: 1rem 1.5rem;
					border-radius: 12px;
					box-shadow: 0 10px 25px rgba(0,0,0,0.1);
					z-index: 1000;
					font-weight: 500;
					transform: translateX(100%);
					transition: transform 0.3s ease;
					display: flex;
					align-items: center;
					gap: 0.75rem;
					max-width: 400px;
				`;
				
				const icon = type === 'success' ? 'fas fa-check-circle' : 
							 type === 'error' ? 'fas fa-exclamation-circle' : 'fas fa-info-circle';
				
				notification.innerHTML = `
					<i class="${icon}"></i>
					<span>${message}</span>
					<button style="background: none; border: none; color: white; cursor: pointer; font-size: 1.2rem;" onclick="this.parentElement.remove()">×</button>
				`;

				document.body.appendChild(notification);

				// Animate in
				setTimeout(() => {
					notification.style.transform = 'translateX(0)';
				}, 100);

				// Auto remove
				setTimeout(() => {
					notification.style.transform = 'translateX(100%)';
					setTimeout(() => {
						if (document.body.contains(notification)) {
							document.body.removeChild(notification);
						}
					}, 300);
				}, 4000);
			}

			// Animate stats cards on load
			function animateStatsCards() {
				const cards = document.querySelectorAll('.stat-card');
				cards.forEach((card, index) => {
					card.style.opacity = '0';
					card.style.transform = 'translateY(20px)';
					
					setTimeout(() => {
						card.style.transition = 'all 0.6s ease';
						card.style.opacity = '1';
						card.style.transform = 'translateY(0)';
					}, index * 100);
				});
			}

			// Utility functions
			function getToken() {
				const cookieToken = getCookie("access_token");
				if (cookieToken) return cookieToken;
				return localStorage.getItem("access_token");
			}

			function getCookie(name) {
				const value = `; ${document.cookie}`;
				const parts = value.split(`; ${name}=`);
				if (parts.length === 2) return parts.pop().split(";").shift();
				return null;
			}
		</script>
	</body>
</html>
